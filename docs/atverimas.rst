.. default-role:: literal

.. _atvėrimas:

Duomenų atvėrimo procesas
#########################

Labai apibendrintai, kiekviena įstaiga atverianti duomenis turi atlikti šiuos
žingsnius:

1. Paskirti atvirų duomenų koordinatorių ir `užsiregistruoti portale`__.

   __ https://data.gov.lt/opening/learningmaterial/10

2. Sudaryti savo valdomų :term:`duomenų rinkinių <duomenų rinkinys>` sąrašą
   ir publikuoti jį :term:`atvirų duomenų portale <ADK>` (:ref:`preliminari
   inventorizacija <preliminari-inventorizacija>`).

3. Parengti atveriamų :ref:`duomenų struktūros aprašus <dsa>` ir paskelbti
   juos :term:`atvirų duomenų portale <ADK>` (:ref:`detali inventorizacija
   <detali-inventorizacija>`).

4. :ref:`Atverti duomenis <duomenų-atvėrimas>` savarankiškai, su rangovo arba
   Vyriausybės įgaliotos institucijos (Statistikos departamento) pagalba.

:ref:`Duomenų atvėrimo <spinta>` ir atvertų :ref:`duomenų publikavimo
<saugykla>` techninis įgyvendinimas didele dalimi yra išspręstas, todėl
įstaigoms užtenka pasidaryti tik pilną duomenų inventorizaciją, kas susiveda
į dviejų lentelių užpildymą.

Pirmiausia įstaiga :ref:`užsiregistruoja portale
<koordinatoriaus-registracija>`, kad vieno `langelio principu`__ būtų galima
kreiptis dėl duomenų pakartotinio naudojimo. Kad būtų aišku, kokie duomenys yra,
ir kas juos valdo, įstaigos sudaro savo valdomų duomenų rinkinių sąrašus ir
skelbia juos :term:`atvirų duomenų portale <ADK>`. Tai yra mažiausias privalomas
dalykas, kurį turi pasidaryti visos valstybinės įstaigos ir jų valdomos įmonės.

__ https://e-seimas.lrs.lt/portal/legalAct/lt/TAD/TAIS.94745/asr#part_a44804491fd3481daaca8b3f668af7a0

Duomenų naudotojai, vieno langelio principu ieško jiems reikiamų duomenų. Jei
pageidaujamų duomenų neranda, :ref:`registruoja paklausimą dėl naujo duomenų
rinkinio<poreikio-deklaravimas>`. Jei paklausėjas nenurodė atsakingos įstaigos,
tuomet :term:`IVPK` suranda atsakingą įstaigą ir priskiria jai paklausimą.

Jei duomenų naudotojas ieškodamas randa duomenų rinkinį, kuris dar nėra
atvertas, tuomet teikia :ref:`prašymą konkrečiam rinkiniui atverti
<poreikio-deklaravimas>`. Įstaigos gavusios tokius paklausimus privalo nurodyti
terminus, kada duomenų rinkinys bus atvertas ir pradeda atvėrimo darbus,
pirmiausia paruošia duomenų struktūros aprašą, jį publikuoja portale ir
galiausiai atveria pačius duomenis, kurie atitinka publikuota duomenų struktūros
aprašą.

Po to, kai yra publikuojamas duomenų struktūros aprašas, duomenų naudotojai
gali peržiūrėti, kas tiksliai planuojama atverti ir teikti pastabas, jei
randa kokių nors trūkumų.

Įstaigos duomenų struktūros aprašus rengia pirmiausia tiems rinkiniams, kurie
turi paklausą, jei rinkiniais niekas nesidomi, tuomet aprašus rengia savo
nuožiūra. Net jei duomenų rinkiniai yra nepaklausūs, rekomenduojama iš anksto
parengti jų duomenų struktūros aprašus, kad atsiradus poreikiui, duomenų
atvėrimo procesas būtų sklandesnis ir greitesnis.

Kai jau duomenys yra atverti, įstaigos gali sulaukti klausimų apie tai kaip
naudoti duomenis arba prašymus didinti atvertų duomenų brandos lygį.

Visus pateiktus duomenų naudotojų prašymus prižiūri :term:`IVPK` ir
užtikrina, kad įstaigos pateiktų atsakymus. Jei įstaigos neatsako į
paklausimus, :term:`IVPK` susisiekia su įstaiga ir įsitikina ar ji gauna
paklausimus, pasiteirauja dėl kokių priežasčių įstaiga nepateikia atsakymų.

Toliau aptarsime kiekvieną žingsnį detaliau.


.. _koordinatoriaus-registracija:

Koordinatoriaus registracija
============================

Kiekviena duomenis atverianti įstaiga pirmiausia turi paskirti vieną žmogų
atsakingą už duomenų atvėrimo koordinavimą. Šis žmogus bus atsakingas už
įstaigos duomenų atvėrimo organizavimą, atsakys į duomenų naudotojų
paklausimus pateiktus per atvirų duomenų portalą, išsiaiškins kokius duomenis
įstaiga valdo ir kas atsakingas už jų priežiūrą.

Atvirų duomenų koordinatorius neprivalo turėti techninių duomenų valdymo
kompetencijų, tačiau tokių kompetencijų turėjimas būtų privalumas.

Koordinatoriaus paskyrimas įteisinamas į atvirų duomenų portalą pateikianti
įstaigos vadovo pasirašytą `raštą`__.

__ https://data.gov.lt/opening/learningmaterial/10

Turint įstaigos vadovo pasirašytą raštą, paskirtasis koordinatorius
`registruojasi atvirų duomenų portale`__.

__ https://data.gov.lt/

.. image:: static/koordinatoriaus-registracija.png
    :target: https://data.gov.lt/

Koordinatorius registruoja valstybės įstaigos ir jų valdomos įmonės. Savo
koordinatorius gali registruoti ir privataus sektoriaus atstovai, jei
publikuoja atvirus duomenis ir nori, kad jie būtų randami Lietuvos ir Europos
atvirų duomenų portaluose.


.. _inventory:

Inventorizacija
===============

Duomenų inventorizacija susideda iš dviejų dalių:

- Duomenų rinkinių sąrašo sudarymas (:ref:`preliminari inventorizacija
  <preliminari-inventorizacija>`)

- Duomenų struktūros aprašo parengimas (:ref:`detali inventorizacija
  <detali-inventorizacija>`)

Pati sudėtingiausia dalis yra duomenų struktūros aprašo parengimas. Todėl
rekomenduojama pirmiausia susidaryti rinkinių sąrašą ir jį publikuoti
:term:`atvirų duomenų portale <ADK>`, o po to, pereiti prie duomenų struktūros
aprašų, prioritetą teikiant duomenų rinkiniams, kurie turi paklausą.


.. _preliminari-inventorizacija:

Preliminari inventorizacija
---------------------------

Preliminarios inventorizacijos metu, įstaigos paskirtas koordinatorius
apžvelgia įstaigos veiklos nuostatus, valdomas informacines sistema,
registrus, jau atvertus duomenis ir sudaro įstaigos valdomų :term:`duomenų
rinkinių <duomenų rinkinys>` sąrašą.

Atkreipkite dėmesį, kad rinkinių sąrašas sudaromas ir publikuojamas atvirų
duomenų portale dar prieš atveriant duomenis. Toks sąrašas padės atvirų duomenų
naudotojams rasti duomenis ir pateikti prašymus jiems gauti. Pateikti
prašymai siunčiami tiesiogiai įstaigos koordinatoriui ir padeda geriau
suprasti duomenų atvėrimo prioritetus, suprasti kokie duomenų rinkiniai turi
didžiausią paklausą.

Jei įstaiga jau yra atvėrusi duomenis ir juos publikuoja, tuomet, nuorodas į
atvertus duomenis taip pat pateikia :term:`atvirų duomenų portale <ADK>`.
Atvirų duomenų naudotojai gali pateikti prašymus didinti jau atvertų duomenų
:ref:`brandos lygį <level>`.

.. image:: static/rinkinio-forma.png
    :target: https://data.gov.lt/admin/dataset/new

Sudarant duomenų rinkinių sąrašus svarbiausia užtikrinti, kad duomenis būti
paprasta rasti, todėl reikia pateikti tokią informaciją:

- rinkinio pavadinimas
- rinkinio aprašymas
- kategorija
- raktiniai žodžiai
- kontaktinis asmuo

Duomenų rinkinių sąrašus galima sudaryti :term:`atvirų duomenų portale <ADK>`
arba galima parengti `rinkinių sąrašo lentelę`__ ir ją vėliau importuoti į
:term:`portalą <ADK>`.

__ https://data.gov.lt/opening/learningmaterial/14

Sudarant rinkinių sąrašus, reikėtų vadovautis principu, kad visi duomenys,
kuriems nėra taikomi naudojimo apribojimai yra atviri.

Todėl reikėtų peržiūrėti įstaigos veiklos nuostatus, valdomas informacines
sistemas, registrus, ataskaitas ar kitus dokumentus.

Praktiškai visose veiklos srityse dalyvauja vienokie ar kitokie duomenys. Net
jei duomenys yra fiksuojami tekstiniuose dokumentuose atitinkančiuose tam
tikrą šabloną, tokius duomenis reikėtų įtraukti į rinkinių sąrašą.

Svarbu turėti, kiek įmanoma pilnesnį vaizdą apie įstaigų valdomus duomenis.
Rinkinių sąrašų sudarymas nereiškia įsipareigojimą atverti visus rinkinių
sąraše esančius duomenis. Duomenis būtina atverti tik tuo atveju, jei jie turi
paklausą.


.. _detali-inventorizacija:

Detali inventorizacija
----------------------

Turint sudarytą duomenų rinkinių sąrašą, kiekvienam rinkiniui reikia parengti
duomenų struktūros aprašą ir jį publikuoti :term:`atvirų duomenų portale <ADK>`.

Duomenų struktūros aprašus reikia parengti tiems duomenų rinkiniams, kurie
turi paklausą. Rinkiniams, kuriais niekas nesidomi, duomenų struktūros
aprašai rengiami savo nuožiūra. Net jei rinkinys neturi paklausos,
rekomenduojama įvertinus rinkinio paklausos potencialą, pasirengti duomenų
struktūros aprašą, kad vėliau atsiradus paklausai, duomenų atvėrimo procesas
būtų greitesnis ir sklandesnis.

Duomenų struktūros aprašo rengimas susideda iš tokių žingsnių:

1. Išsiaiškinama, kas yra atsakingas už techninė duomenų šaltinio priežiūrą.

2. Paprašoma, kad už techninė priežiūrą atsakingas žmogus parengtų pirminį
   duomenų struktūros aprašo variantą.

3. Kartu su duomenų šaltinio administratoriais ir konkretaus duomenų rinkinio
   srities ekspertais papildomas pirminis aprašas, nurodant kuriuos duomenis
   galima atverti, sužymimi asmens duomenys, nurodoma kurie asmens duomenys
   turi būti nuasmeninami, nurodomas duomenų brandos lygis.

Jei pirminio duomenų struktūros aprašo varianto sugeneruoti iš duomenų
šaltinio neįmanoma, pavyzdžiui, jei duomenys yra labai žemo brandos lygio,
tuomet duomenų struktūros aprašas pildomas nuo nulio naudojant :download:`aprašo
lentelės šabloną </static/sablonai/dsa.xlsx>`.

Vykdant duomenų atvėrimą, pirmiausia rengiamas :term:`šaltinio duomenų
struktūros aprašas (ŠDSA) <ŠDSA>`, kuriame yra pateikta visa duomenų šaltinio
struktūros išklotinė, vėliau sužymint kur yra atviri duomenys. Vėliau
:term:`ŠDSA` yra :ref:`konvertuojamas <šdsa-vertimas-į-adsa>` į :term:`ADSA`.
:term:`ADSA` yra publikuojamas :term:`atvirų duomenų portale <ADK>`, o
:term:`ŠDSA` naudojama automatizuotam duomenų atvėrimui ir publikavimui.

:term:`DSA` galima aprašyti duomenis saugomus įvairiuose duomenų šaltiniuose,
plačiau apie tai galima pasiskaityti skyriuje :ref:`duomenų-šaltiniai`, tačiau
kaip pavyzdį galime panagrinėti išgalvotą duomenų šaltinį, kuriame yra viena
lentelė:

====  ========  =======  ===============
ŠALIS
----------------------------------------
ID    KODAS     ŽEMYNAS  ŠALIS
====  ========  =======  ===============
1     lt        eu       Lietuva
2     lv        eu       Latvija
3     ee        eu       Estija
====  ========  =======  ===============

Šaltinio duomenų struktūros aprašas (ŠDSA) nėra skirtas viešinimui, aprašantis
vidinių duomenų bazių ar kitų vidinių šaltinių duomenų struktūras. ŠDSA leidžia
geriau suprasti turimus duomenis ir pažymėti, kurie duomenys gali būti atverti,
pakartotinai panaudoti ar skirti tik vidiniam naudojimui.

Dažniausiai duomenų bazių valdymo sistemos jau turi pakankamai metaduomenų, kad
iš jų būtų galima :ref:`automatiškai generuoti <šdsa-generavimas>` pirminį
:term:`ŠDSA` lentelės variantą, kuris šiuo atveju atrodys taip:

.. table:: Pirminis šaltinio duomenų struktūros aprašas (:term:`ŠDSA`)

    +----+---+---+---+---+----------+---------+-------+------------+---------+-------+--------+-----+-------+-------------+
    | id | d | r | b | m | property | type    | ref   | source     | prepare | level | access | uri | title | description |
    +====+===+===+===+===+==========+=========+=======+============+=========+=======+========+=====+=======+=============+
    |    | datasets/gov/example     |         |       |            |         |       |        |     |       |             |
    +----+---+---+---+---+----------+---------+-------+------------+---------+-------+--------+-----+-------+-------------+
    |    |   | salys                | sql     |       | \sqlite:// |         |       |        |     |       |             |
    +----+---+---+---+---+----------+---------+-------+------------+---------+-------+--------+-----+-------+-------------+
    |    |   |   |   | Salis        |         | id    | ŠALIS      |         |       |        |     |       |             |
    +----+---+---+---+---+----------+---------+-------+------------+---------+-------+--------+-----+-------+-------------+
    |    |   |   |   |   | id       | integer |       | ID         |         | 4     |        |     |       |             |
    +----+---+---+---+---+----------+---------+-------+------------+---------+-------+--------+-----+-------+-------------+
    |    |   |   |   |   | kodas    | string  |       | KODAS      |         | 2     |        |     |       |             |
    +----+---+---+---+---+----------+---------+-------+------------+---------+-------+--------+-----+-------+-------------+
    |    |   |   |   |   | zemynas  | string  |       | ŽEMYNAS    |         | 2     |        |     |       |             |
    +----+---+---+---+---+----------+---------+-------+------------+---------+-------+--------+-----+-------+-------------+
    |    |   |   |   |   | salis    | string  |       | ŠALIS      |         | 2     |        |     |       |             |
    +----+---+---+---+---+----------+---------+-------+------------+---------+-------+--------+-----+-------+-------------+

Tokia automatiškai generuota :term:`DSA` lentelė vadinama pirmine :term:`ŠDSA`
lentele, kadangi ji yra generuota automatiškai ir neredaguota.

Keičiantis pirminio duomenų šaltinio struktūrai :term:`ŠDSA` galima automatiškai
atnaujinti, papildant naujai atsiradusiais duomenų laukais.

Deja, automatinėmis priemonėmis galima nuspėti tik dalį metaduomenų reikšmių.
Tai kas neįveikiama automatinėms priemonėms, pildoma rankiniu būdu:

- Suteikti :ref:`duomenų rinkinio <dataset>` struktūrai :ref:`kodinį
  pavadinimą <kodiniai-pavadinimai>`, kurio pagrindu duomenys bus publikuojami
  per :term:`API`.

- Užpildyti :data:`access` stulpelį, nurodant duomenų :ref:`prieigos lygį
  <access>`.

- Užpildyti :data:`prepare` stulpelį, jei duomenų lentelės atveriamos ne
  pilna apimtimi ir reikia jas :ref:`filtruoti <duomenų-atranka>`.

- :ref:`Sužymėti <pii>` duomenų laukus, kuriuose yra pateikiami asmenį
  identifikuojantys duomenys ir pažymėti duomenų laukus, kuriuos reikia
  :ref:`nuasmeninti <nuasmeninimas>`.

- :data:`access` stulpelyje, duomenų laukams priskirti :ref:`brandos lygio
  <level>` reikšmę.

Baigus aukščiau išvardintus lentelės papildymo darbus, :term:`ŠDSA` lentelė
turėtu atrodyti taip:

.. table:: Darbinis šaltinio duomenų struktūros aprašas (:term:`ŠDSA`)

    +----+---+---+---+---+------------+---------+-------+------------+----------------+-------+---------+-----+-------+-------------+
    | id | d | r | b | m | property   | type    | ref   | source     | prepare        | level | access  | uri | title | description |
    +====+===+===+===+===+============+=========+=======+============+================+=======+=========+=====+=======+=============+
    |    | datasets/example/countries |         |       |            |                |       |         |     |       |             |
    +----+---+---+---+---+------------+---------+-------+------------+----------------+-------+---------+-----+-------+-------------+
    |    |   | salys                  | sql     |       | \sqlite:// |                |       |         |     |       |             |
    +----+---+---+---+---+------------+---------+-------+------------+----------------+-------+---------+-----+-------+-------------+
    |    |   |   |   | Country        |         | id    | SALIS      | continent="eu" |       |         |     |       |             |
    +----+---+---+---+---+------------+---------+-------+------------+----------------+-------+---------+-----+-------+-------------+
    |    |   |   |   |   | id         | integer |       | ID         |                | 4     | private |     |       |             |
    +----+---+---+---+---+------------+---------+-------+------------+----------------+-------+---------+-----+-------+-------------+
    |    |   |   |   |   | code       | string  |       | KODAS      |                | 2     | open    |     |       |             |
    +----+---+---+---+---+------------+---------+-------+------------+----------------+-------+---------+-----+-------+-------------+
    |    |   |   |   |   | continent  | string  |       | ŽEMYNAS    |                | 2     | private |     |       |             |
    +----+---+---+---+---+------------+---------+-------+------------+----------------+-------+---------+-----+-------+-------------+
    |    |   |   |   |   | name       | string  |       | SALIS      |                | 2     | open    |     |       |             |
    +----+---+---+---+---+------------+---------+-------+------------+----------------+-------+---------+-----+-------+-------------+

Galiausiai, toks duomenų struktūros aprašas gali būti naudojamas
:ref:`automatizuotam duomenų atvėrimui ir publikavimui
<automatinis-atvėrimas>` arba naudojamas kaip sutarties priedas, jei įstaiga
duomenis atveria su rangovo ar Vyriausybės paskirtos įstaigos pagalba.

Į :term:`atvirų duomenų portalą <ADK>` pateikiamas :term:`ADSA` variantas, kuris
:ref:`konvertuojamas iš ŠDSA automatinėmis priemonėmis <šdsa-vertimas-į-adsa>`.
:term:`ADSA`, kurį reikia įkelti į portalą atrodys taip:

.. table:: Planuojamų atverti duomenų struktūros aprašas (:term:`ADSA`)

    +----+---+---+---+---+------------+---------+-------+--------+---------+-------+---------+-----+-------+-------------+
    | id | d | r | b | m | property   | type    | ref   | source | prepare | level | access  | uri | title | description |
    +====+===+===+===+===+============+=========+=======+========+=========+=======+=========+=====+=======+=============+
    |    | datasets/example/countries |         |       |        |         |       |         |     |       |             |
    +----+---+---+---+---+------------+---------+-------+--------+---------+-------+---------+-----+-------+-------------+
    |    |   | salys                  |         |       |        |         |       |         |     |       |             |
    +----+---+---+---+---+------------+---------+-------+--------+---------+-------+---------+-----+-------+-------------+
    |    |   |   |   | Country        |         |       |        |         |       |         |     |       |             |
    +----+---+---+---+---+------------+---------+-------+--------+---------+-------+---------+-----+-------+-------------+
    |    |   |   |   |   | code       | string  |       |        |         | 2     | open    |     |       |             |
    +----+---+---+---+---+------------+---------+-------+--------+---------+-------+---------+-----+-------+-------------+
    |    |   |   |   |   | name       | string  |       |        |         | 2     | open    |     |       |             |
    +----+---+---+---+---+------------+---------+-------+--------+---------+-------+---------+-----+-------+-------------+

Jei įstaiga jau yra atvėrusi duomenis ir juos publikuoja savo infrastruktūroje,
tuomet į atvirų duomenų portalą turi būti įkeliamas, ne :term:`ADSA`, o
:term:`ŠDSA`, kuriame aprašyti įstaigos infrastruktūroje publikuojami duomenys.


.. _duomenų-atvėrimas:

Duomenų atvėrimas
=================

Kiekviena įstaiga renkasi vieną iš šių duomenų atvėrimo variantų:

- Atveria savarankiškai, jei turi vidinius IT resursus.

- Atveria su rangovo pagalba, jei neturi vidinių IT resursų, bet turi
  paslaugų teikimo sutartis su išoriniu rangovu.

- Atveria su Vyriausybės įgaliotos institucijos (Statistikos departamento)
  pagalba, jei neturi nei vidinių IT resursų, nei išorinio rangovo.

Nepriklausomai nuo pasirinkto varianto, duomenų struktūros variantas
naudojamas, kaip techninė specifikacija ar sutarties priedas, kuriame
tiksliai įvardinta kurie duomenys yra atveriami.

Standartizuota duomenų struktūros aprašo forma, leidžia :ref:`automatizuoti
techninę duomenų atvėrimo dalį <automatinis-atvėrimas>`.


Savarankiškas atvėrimas
-----------------------

Atveriant duomenis savarankiškai įstaiga turi tokius variantus:

- Duomenis atveria naudojantis :ref:`automatizuoto duomenų atvėrimo priemonėmis
  <spinta>`.

- Duomenis atveria savo priemonėmis, tačiau atveriamus duomenis publikuoja per
  :ref:`API <saugykla>` į :term:`atvirų duomenų saugyklą <ADS>`.

- Duomenis jau yra atvėrusi arba duomenis atveria savo priemonėmis ir
  publikuoja savo infrastruktūroje.

Nepriklausomai nuo pasirinkto varianto, įstaiga turi pasidaryti :ref:`pilną
inventorizaciją <inventory>`.

Jei įstaiga jau yra atvėrusi duomenis, tada užtenka pasidaryti tik
:ref:`inventorizaciją <inventory>`.


Atvėrimas per rangovą
---------------------

Atvėrimas vyksta taip pat, kaip ir savarankiškai, tik naudojantis išorinio
rangovo paslaugomis.

Su rangovu sudarant sutarti, kaip sutarties priedas turi būti pateikiamas
duomenų struktūros aprašas, kuriame tiksliai nurodyta kokius duomenis reikia
atverti.


Atvėrimas per Statistikos departamentą
--------------------------------------

Visoms įstaigos, kurios neturi vidinių resursų ar nėra pajėgios pačios atverti
duomenų, Vyriausybė yra paskyrusi atsakingą instituciją, Statistikos
departamentą.

Jei duomenys atveriami per Statistikos departamentą, tuomet įstaiga su
Statistikos departamentu sudaro duomenų atvėrimo paslaugos teikimo sutartį,
prie kurios, kaip priedas pateikiamas atveriamų duomenų struktūros aprašas.

Statistikos departamentas numatytu periodiškumu pasidarys visų duomenų kopiją
(prie kurių yra suteikta prieiga) į Valstybės Duomenų Valdysenos Informacinę
Sistemą (VDVIS).

Vadovaujantis duomenų struktūros apraše pateikta informacija ir naudojantis
VDVIS funkcionalumu, atliks nuasmeninimą, kitas reikalingas transformacijas ir
publikuos duomenis per :term:`atvirų duomenų saugyklą <ADS>`.
