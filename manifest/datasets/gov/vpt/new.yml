type: dataset
name: gov/vpt/new
date: 2019-09-13
version: 1
resources:
  mssql:
    type: sql
    source:
      schema: CVPIS
    objects:
      atn1:
        valstybe/pirkimas:
          source: ATN1
          properties:
            _id:
              type: pk
              source: ID
            rusis:
              type: string
              const: planas
            pavadinimas:
              type: string
              source: TITLE
            data:
              type: date
              source: PUBLISHED_DATE
            pirkimo_numeris:
              type: string
              source: TENDER_ID
            forma:
              type: string
              source: FORM_NAME
        valstybe/pirkimas/objektas:
          source: ATN1
          properties:
            _id:
              type: pk
              source: ID
            kaina:
              type: number
              source: TOTAL_CONTRACT_VALUE
            pirkimas:
              type: ref
              object: valstybe/pirkimas
              source: ID
            pavadinimas:
              type: string
              source: PROCUREMENT_OBJECT_NAME
      atn1/perkancioji:
        valstybe/pirkimas/dalyvis:
          source: ATN1
          properties:
            _id:
              type: pk
              source: ID
            pavadinimas:
              type: string
              source: OFFICIAL_NAME_1
            pirkimas:
              type: ref
              object: valstybe/pirkimas
              source: ID
            role:
              type: string
              const: buyer
            organizacija:
              type: ref
              object: organizacija
              source: LEGAL_ENTITY_CODE_1
        organizacija:
          source: ATN1
          properties:
            _id:
              type: pk
              source: LEGAL_ENTITY_CODE_1
            pavadinimas:
              type: string
              source: OFFICIAL_NAME_1
            registracijos_numeris:
              type: string
              source: LEGAL_ENTITY_CODE_1
        valstybe/pirkimas/dalyvis/adresas:
          source: ATN1
          properties:
            _id:
              type: pk
              source:
                - COUNTRY_1
                - TOWN_1
                - POSTAL_ADDRESS_1
            dalyvis:
              type: ref
              object: valstybe/pirkimas/dalyvis
              source: ID
            adresas:
              type: string
              source: POSTAL_ADDRESS_1
            gyvenviete:
              type: string
              source: TOWN_1
            salis:
              type: string
              source: COUNTRY_1
      atn1/vykdancioji:
        valstybe/pirkimas/dalyvis:
          source: ATN1
          properties:
            _id:
              type: pk
              source: ID
            pavadinimas:
              type: string
              source: OFFICIAL_NAME_2
            pirkimas:
              type: ref
              object: valstybe/pirkimas
              source: ID
            role:
              type: string
              const: procuringEntity
            organizacija:
              type: ref
              object: organizacija
              source: LEGAL_ENTITY_CODE_2
        organizacija:
          source: ATN1
          properties:
            _id:
              type: pk
              source: LEGAL_ENTITY_CODE_2
            registracijos_numeris:
              type: string
              source: LEGAL_ENTITY_CODE_2
            pavadinimas:
              type: string
              source: OFFICIAL_NAME_2
        valstybe/pirkimas/dalyvis/adresas:
          source: ATN1
          properties:
            _id:
              type: pk
              source:
                - COUNTRY_2
                - TOWN_2
                - POSTAL_ADDRESS_2
            dalyvis:
              type: ref
              object: valstybe/pirkimas/dalyvis
              source: ID
            adresas:
              type: string
              source: POSTAL_ADDRESS_2
            gyvenviete:
              type: string
              source: TOWN_2
            salis:
              type: string
              source: COUNTRY_2
      plan:
        valstybe/pirkimas:
          source: PLANNED_PROCUREMENT
          properties:
            _id:
              type: pk
              source: ID
            rusis:
              type: string
              const: planas
            pavadinimas:
              type: string
              source: TITLE
            kaina:
              type: number
              source: PLANNED_VALUE
            kiekis:
              type: string
              source: UNIT_OF_MEASUREMENT_PLANNED_VALUE
      plan/perkancioji:
        valstybe/pirkimas/dalyvis:
          properties:
            _id:
              type: pk
              source: ID
            pirkimas:
              type: ref
              object: valstybe/pirkimas
              source: ID
            role:
              type: string
              const: buyer
            pavadinimas:
              type: string
              source: NAME
            organizacija:
              type: ref
              object: organizacija
              source: ORG_NR
          source: PLANNED_PROCUREMENT
        organizacija:
          source: PLANNED_PROCUREMENT
          properties:
            _id:
              type: pk
              source: ORG_NR
            registracijos_numeris:
              type: string
              source: ORG_NR
            pavadinimas:
              type: string
              source: NAME
      atn1/contractor:
        valstybe/pirkimas/dalyvis:
          source: ATN1_CONTRACT_LIST
          properties:
            _id:
              type: pk
              source:
                - ATN1_ID
                - CODE
            role:
              type: string
              const: contractor
            pirkimas:
              type: ref
              object: valstybe/pirkimas
              source: ATN1_ID
            organizacija:
              type: ref
              object: organizacija
              source: CODE
            pavadinimas:
              type: string
              source: NAME
        organizacija:
          source: ATN1_CONTRACT_LIST
          properties:
            _id:
              type: pk
              source: CODE
            registracijos_numeris:
              type: string
              source: CODE
            pavadinimas:
              type: string
              source: NAME
        valstybe/pirkimas/dalyvis/objektas:
          source: ATN1_CONTRACT_LIST
          properties:
            _id:
              type: pk
              source: ID
            kaina:
              type: string
              source: TOTAL_VALUE_OF_PART
            pavadinimas:
              type: string
              source: ITEM
            dalyvis:
              type: ref
              object: valstybe/pirkimas/dalyvis
              source:
                - ATN1_ID
                - CODE
